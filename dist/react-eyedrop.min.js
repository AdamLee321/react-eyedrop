!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("html2canvas"),require("react"),require("get-canvas-pixel-color")):"function"==typeof define&&define.amd?define(["exports","html2canvas","react","get-canvas-pixel-color"],t):t((e=e||self)["react-eyedrop"]={},e.html2canvas,e.React,e.getCanvasPixelColor)}(this,function(e,I,A,n){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I;var L="default"in A?A.default:A;function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n=n&&n.hasOwnProperty("default")?n.default:n;function W(e,t,r,n){return function(e,t,r,n,o){if(!e.getContext)throw new Error("Input element is not a canvas");var a=e.width,c=e.height;t<0&&(t=0),r<0&&(r=0),a<t+n&&(n=a-t),c<r+o&&(o=c-r);for(var u=e.getContext("2d").getImageData(t,r,n,o).data,i=[],f=0;f<u.length;f+=4){var s=R(u.slice(f,f+4),4),d=s[0],l=s[1],p=s[2];s[3];i.push({r:d,g:l,b:p})}return i}(e,r-t,n-t,2*t,2*t)}function q(e,t,r){return n(e,t,r)}var N=function(e){var t=e.toString(16);return t.length<2&&(t="0".concat(t)),t},X={eyedropperWrapper:{position:"relative"},eyedropperWrapperButton:{backgroundColor:"#000000",color:"#ffffff",border:"1px solid #ffffff",borderRadius:"20%",padding:"10px 25px"}};e.EyeDropper=function(o){function r(e,t,r){document.body&&(document.body.style.cursor=r?y:m),f(e),p(t)}function e(){var e=o.onPickStart,t=o.disabled;e&&e(),r(!0,t||!0,!0)}function d(){return r(!1,!1,!1)}function t(i){var e=i.target;if("img"===i.target.nodeName.toLowerCase()){var t=i.offsetX,r=i.offsetY,n=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t}(e),o=q(n,t,r),a=o.r,c=o.g,u=o.b;return x({r:a,g:c,b:u}),void(!0===g&&d())}var f=i.pageX,s=i.pageY;I(i.target,{logging:!1}).then(function(e){if(void 0===b||0===b){var t=q(e,f,s),r=t.r,n=t.g,o=t.b;x({r:r,g:n,b:o})}else{var a=i.pageX,c=i.pageY,u=function(e){var r=e.length,t=e.reduce(function(e,t){return e[0]+=Math.round(t.r/r),e[1]+=Math.round(t.g/r),e[2]+=Math.round(t.b/r),e},[0,0,0]);return{r:t[0],g:t[1],b:t[2]}}(W(e,b,a,c));x(u)}}),!0===g&&d()}var n=R(A.useState({rgb:"",hex:""}),2),a=n[0],c=n[1],u=R(A.useState(!1),2),i=u[0],f=u[1],s=R(A.useState(!1),2),l=s[0],p=s[1],v=o.once,g=void 0===v||v,h=o.pickRadius,b=void 0===h?0:h,y=o.cursorActive?o.cursorActive:"copy",m=o.cursorInactive?o.cursorInactive:"auto",w=A.useCallback(function(e){return 27===e.keyCode&&r(!1,!1,!1)},[]),x=function(e){var t=o.onChange,r=function(e){var t=e.r,r=e.g,n=e.b;return"rgb(".concat(t,", ").concat(r,", ").concat(n,")")}(e),n=function(e){var t=e.r,r=e.g,n=e.b,o=N(t),a=N(r),c=N(n);return"#".concat(o).concat(a).concat(c)}(e);t({rgb:r,hex:n,customProps:j}),c({rgb:r,hex:n})};A.useEffect(function(){var e=o.onInit;e&&e(),b&&function(e){if(e<0||450<e)throw new Error("Property `pickRadius` out of bounds: please choose a value between 0 - 450.")}(b)},[]),A.useEffect(function(){return i&&document.addEventListener("click",t),function(){(g||i)&&document.removeEventListener("click",t)}},[i,g]),A.useEffect(function(){return document.addEventListener("keydown",w),function(){document.removeEventListener("keydown",w)}},[w]);var C=o.wrapperClasses,E=o.buttonClasses,k=o.customComponent,P=o.colorsPassThrough,O=o.children,j=o.customProps,S=P?function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},P,a):{};return L.createElement("div",{style:X.eyedropperWrapper,className:C},k?L.createElement(k,M({onClick:e},S,{customProps:j,disabled:l})):L.createElement("button",{id:"react-eyedrop-button",style:X.eyedropperWrapperButton,className:E,onClick:e,disabled:l},O))},Object.defineProperty(e,"__esModule",{value:!0})});
