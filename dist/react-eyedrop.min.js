!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("html2canvas"),require("get-canvas-pixel-color")):"function"==typeof define&&define.amd?define(["react","html2canvas","get-canvas-pixel-color"],t):(e=e||self)["react-eyedrop"]=t(e.React,e.html2canvas,e.getCanvasPixelColor)}(this,function(O,S,j){"use strict";var I="default"in O?O.default:O;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}S=S&&S.hasOwnProperty("default")?S.default:S,j=j&&j.hasOwnProperty("default")?j.default:j;var L=function(e){var t=e.toString(16);return t.length<2&&(t="0".concat(t)),t},W={eyedropperWrapper:{position:"relative"},eyedropperWrapperButton:{backgroundColor:"#000000",color:"#ffffff",border:"none",borderRadius:"20%",padding:"10px 25px"}};return function(u){var e=A(O.useState({rgb:"",hex:""}),2),t=e[0],i=e[1],r=A(O.useState(!1),2),n=r[0],o=r[1],a=A(O.useState(!1),2),c=a[0],s=a[1],l=u.cursorActive?u.cursorActive:"copy",d=u.cursorInactive?u.cursorInactive:"auto";O.useEffect(function(){var e=u.onInit,t=u.pickRadius;if(e&&e(),t&&(t<0||450<t))throw new Error("pickRadius out of range: 0-450")},[]),O.useEffect(function(){var e;return e=void 0===u.once||u.once,n&&document.addEventListener("click",v),function(){(e||n)&&document.removeEventListener("click",v)}},[n,u.once]),O.useEffect(function(){return window.addEventListener("keydown",p),function(){document.addEventListener("keydown",p)}},[p]);function f(){var e=u.onPickStart;e&&e(),document.body.style.cursor=l,o(!0),s(!0)}var p=O.useCallback(function(e){27===e.keyCode&&(o(!1),s(!1),document.body.style.cursor=d)},[]),v=function(t){var r=u.pickRadius;S(document.body,{logging:!1}).then(function(e){void 0===r||0<=r&&r<1?g(e,t):y(e,t)}),!0!==u.once&&void 0!==u.once||(o(!1),s(!1),document.body.style.cursor=d)},g=function(e,t){var r=t.pageX,n=t.pageY,o=j(e,r,n),a=o.r,c=o.g,u=o.b;h({r:a,g:c,b:u})},y=function(e,t){var r=t.pageX,n=t.pageY,o=u.pickRadius,a=function(e,t,r,n,o){if(!e.getContext)throw new Error("Input element is not a canvas");var a=e.width,c=e.height;t<0&&(t=0),r<0&&(r=0),a<t+n&&(n=a-t),c<r+o&&(o=c-r);for(var u=e.getContext("2d").getImageData(t,r,n,o).data,i=[],s=0;s<u.length;s+=4){var l=A(u.slice(s,s+4),4),d=l[0],f=l[1],p=l[2];l[3];i.push({r:d,g:f,b:p})}return i}(e,r-o,n-o,2*o,2*o);b(a)},b=function(e){var t=e.length,r=e.reduce(function(e,t){return e[0]+=t.r,e[1]+=t.g,e[2]+=t.b,e},[0,0,0]).map(function(e){return Math.round(e/t)});h({r:r[0],g:r[1],b:r[2]})},h=function(e){var t=e.r,r=e.g,n=e.b,o=u.onPickEnd,a="rgb(".concat(t,", ").concat(r,", ").concat(n,")"),c=function(e,t,r){var n=L(e),o=L(t),a=L(r);return"#".concat(n).concat(o).concat(a)}(t,r,n);u.onChange({rgb:a,hex:c,customProps:C}),i({rgb:a,hex:c}),o&&o()},m=u.wrapperClasses,w=u.buttonClasses,k=u.customComponent,E=u.colorsPassThrough,x=u.children,C=u.customProps,P=E?function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},E,t):{};return I.createElement("div",{style:W.eyedropperWrapper,className:m},k?I.createElement(k,R({onClick:f},P,{customProps:C,disabled:c})):I.createElement("button",{style:W.eyedropperWrapperButton,className:w,onClick:f,disabled:c},x||""))}});
