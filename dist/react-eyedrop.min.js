!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("html2canvas"),require("get-canvas-pixel-color")):"function"==typeof define&&define.amd?define(["react","html2canvas","get-canvas-pixel-color"],t):(e=e||self)["react-eyedrop"]=t(e.React,e.html2canvas,e.getCanvasPixelColor)}(this,function(j,L,T){"use strict";var W="default"in j?j.default:j;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}L=L&&L.hasOwnProperty("default")?L.default:L,T=T&&T.hasOwnProperty("default")?T.default:T;var B=function(e){var t=e.toString(16);return t.length<2&&(t="0".concat(t)),t},N={eyedropperWrapper:{position:"relative"},eyedropperWrapperButton:{backgroundColor:"#000000",color:"#ffffff",border:"none",borderRadius:"20%",padding:"10px 25px"}};return function(v){var e=M(j.useState({rgb:"",hex:""}),2),t=e[0],i=e[1],n=M(j.useState(!1),2),r=n[0],o=n[1],a=M(j.useState(!1),2),c=a[0],u=a[1],s=document.createElement("canvas"),f=M(j.useState(s),2),l=f[0],d=f[1],p=M(j.useState(!1),2),y=p[0],h=p[1],m=v.cursorActive?v.cursorActive:"copy",b=v.cursorInactive?v.cursorInactive:"auto";j.useEffect(function(){var e=v.onInit,t=v.pickRadius;if(e&&e(),t&&t.amount<1)throw new Error("Amount should never be below 1.")},[]),j.useEffect(function(){var e;return e=void 0===v.once||v.once,r&&document.addEventListener("click",w),function(){(e||r)&&document.removeEventListener("click",w)}},[r,v.once]),j.useEffect(function(){return function(){y&&(v.pickRadius?x(l,y):k(l,y),h(!1))}}),j.useEffect(function(){return window.addEventListener("keydown",E),function(){document.addEventListener("keydown",E)}},[E]);function g(){var e=v.onPickStart;v.once,u(!0),e&&e(),document.body.style.cursor=m,o(!0)}var E=j.useCallback(function(e){27===e.keyCode&&(o(!1),u(!1),document.body.style.cursor=b)},[]),w=function(t){L(document.body).then(function(e){h(t),d(e)}),!0!==v.once&&void 0!==v.once||(o(!1),u(!1),document.body.style.cursor=b)},k=function(e,t){var n=t.pageX,r=t.pageY,o=T(e,n,r);P(o)},x=function(e,t){var n,r,o=t.pageX,a=t.pageY,c=v.pickRadius,u=c.unit,i=c.amount;if("radius"===u)r=-(n=i)-1;else{if("pixel"!==u)throw new Error("[EyeDrop] Please define a proper unit type.");if(i%2==0)throw new Error("[EyeDrop] The unit 'pixel' may only have an odd amount.");n=(i-1)/2,r=-(i-1)/2-1}for(var s,f,l=[],d=n;d!==r;d--)for(var p=n;p!==r;p--)f=a-p,(s=o-d)<0||f<0||l.push(T(e,s,f));C(l)},C=function(e){var a=0,c=0,u=0;e.map(function(e,t){var n=e.r,r=e.g,o=e.b;a+=n*n,c+=r*r,u+=o*o,0!==t&&(a=Math.sqrt(a/2),c=Math.sqrt(c/2),u=Math.sqrt(u/2))});var t=parseInt(a),n=parseInt(c),r=parseInt(u);P({r:t,g:n,b:r})},P=function(e){var t=e.r,n=e.g,r=e.b,o=v.onPickEnd,a=v.passThrough,c="rgb(".concat(t,", ").concat(n,", ").concat(r,")"),u=function(e,t,n){var r=B(e),o=B(t),a=B(n);return"#".concat(r).concat(o).concat(a)}(t,n,r);a&&i({rgb:c,hex:u}),v.onChange({rgb:c,hex:u}),o&&o()},S=v.wrapperClasses,I=v.buttonClasses,q=v.customComponent,O=v.passThrough,A=v.children,R=O?function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},O,t):{};return W.createElement("div",{style:N.eyedropperWrapper,className:S},q?W.createElement(q,D({onClick:g},R)):W.createElement("button",{style:N.eyedropperWrapperButton,className:I,onClick:g,disabled:c},A||"Eye-Drop"))}});
