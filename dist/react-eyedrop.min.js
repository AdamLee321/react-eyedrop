!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("react"),require("html2canvas"),require("get-canvas-pixel-color")):"function"==typeof define&&define.amd?define(["react","html2canvas","get-canvas-pixel-color"],r):(e=e||self)["react-eyedrop"]=r(e.React,e.html2canvas,e.getCanvasPixelColor)}(this,function(O,S,j){"use strict";var I="default"in O?O.default:O;function q(){return(q=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function A(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(t.push(c.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}S=S&&S.hasOwnProperty("default")?S.default:S,j=j&&j.hasOwnProperty("default")?j.default:j;var R=function(e){var r=e.toString(16);return r.length<2&&(r="0".concat(r)),r},L={eyedropperWrapper:{position:"relative"},eyedropperWrapperButton:{backgroundColor:"#000000",color:"#ffffff",border:"none",borderRadius:"20%",padding:"10px 25px"}};return function(v){var e=A(O.useState({rgb:"",hex:""}),2),n=e[0],c=e[1],r=A(O.useState(!1),2),t=r[0],o=r[1],a=A(O.useState(!1),2),u=a[0],i=a[1],s=v.cursorActive?v.cursorActive:"copy",f=v.cursorInactive?v.cursorInactive:"auto";O.useEffect(function(){var e=v.onInit,r=v.pickRadius;if(e&&e(),r&&r.amount<1)throw new Error("Amount should never be below 1.")},[]),O.useEffect(function(){var e;return e=void 0===v.once||v.once,t&&document.addEventListener("click",p),function(){(e||t)&&document.removeEventListener("click",p)}},[t,v.once]),O.useEffect(function(){return window.addEventListener("keydown",d),function(){document.addEventListener("keydown",d)}},[d]),O.useEffect(function(){return function(){var e=v.onPickEnd,r=n.rgb,t=n.hex;v.onChange({rgb:r,hex:t,customProps:P}),e&&e()}},[n]);function l(){var e=v.onPickStart;e&&e(),document.body.style.cursor=s,o(!0),i(!0)}var d=O.useCallback(function(e){27===e.keyCode&&(o(!1),i(!1),document.body.style.cursor=f)},[]),p=function(r){S(document.body).then(function(e){v.pickRadius?b(e,r):y(e,r)}),!0!==v.once&&void 0!==v.once||(o(!1),i(!1),document.body.style.cursor=f)},y=function(e,r){var t=r.pageX,n=r.pageY,o=j(e,t,n),a=o.r,c=o.g,u=o.b;h({r:a,g:c,b:u})},b=function(e,r){var t,n,o=r.pageX,a=r.pageY,c=v.pickRadius,u=c.unit,i=c.amount;if("radius"===u)n=-(t=i)-1;else{if("pixel"!==u)throw new Error("[EyeDrop] Please define a proper unit type.");if(i%2==0)throw new Error("[EyeDrop] The unit 'pixel' may only have an odd amount.");t=(i-1)/2,n=-(i-1)/2-1}for(var s,f,l=[],d=t;d!==n;d--)for(var p=t;p!==n;p--)f=a-p,(s=o-d)<0||f<0||l.push(j(e,s,f));m(l)},m=function(e){var a=0,c=0,u=0;e.map(function(e,r){var t=e.r,n=e.g,o=e.b;a+=t*t,c+=n*n,u+=o*o,0!==r&&(a=Math.sqrt(a/2),c=Math.sqrt(c/2),u=Math.sqrt(u/2))});var r=parseInt(a),t=parseInt(c),n=parseInt(u);h({r:r,g:t,b:n})},h=function(e){var r=e.r,t=e.g,n=e.b,o="rgb(".concat(r,", ").concat(t,", ").concat(n,")"),a=function(e,r,t){var n=R(e),o=R(r),a=R(t);return"#".concat(n).concat(o).concat(a)}(r,t,n);c({rgb:o,hex:a})},g=v.wrapperClasses,w=v.buttonClasses,E=v.customComponent,k=v.colorsPassThrough,x=v.children,P=v.customProps,C=k?function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}({},k,n):{};return I.createElement("div",{style:L.eyedropperWrapper,className:g},E?I.createElement(E,q({onClick:l},C,{customProps:P,disabled:u})):I.createElement("button",{style:L.eyedropperWrapperButton,className:w,onClick:l,disabled:u},x||""))}});
