!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("html2canvas"),require("get-canvas-pixel-color")):"function"==typeof define&&define.amd?define(["react","html2canvas","get-canvas-pixel-color"],t):(e=e||self)["react-eyedrop"]=t(e.React,e.html2canvas,e.getCanvasPixelColor)}(this,function(L,W,M){"use strict";var T="default"in L?L.default:L;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}W=W&&W.hasOwnProperty("default")?W.default:W,M=M&&M.hasOwnProperty("default")?M.default:M;var N=function(e){var t=e.toString(16);return t.length<2&&(t="0".concat(t)),t},X={eyedropperWrapper:{position:"relative"},eyedropperWrapperButton:{backgroundColor:"#000000",color:"#ffffff",border:"none",borderRadius:"20%",padding:"10px 25px"}};return function(v){var e=D(L.useState({rgb:"",hex:""}),2),t=e[0],u=e[1],r=D(L.useState(!1),2),n=r[0],o=r[1],a=D(L.useState(!1),2),c=a[0],i=a[1],s=document.createElement("canvas"),f=D(L.useState(s),2),l=f[0],d=f[1],p=D(L.useState(!1),2),y=p[0],m=p[1],h=v.cursorActive?v.cursorActive:"copy",b=v.cursorInactive?v.cursorInactive:"auto";L.useEffect(function(){var e=v.onInit,t=v.pickRadius;if(e&&e(),t&&t.amount<1)throw new Error("Amount should never be below 1.")},[]),L.useEffect(function(){var e;return e=void 0===v.once||v.once,n&&document.addEventListener("click",E),function(){(e||n)&&document.removeEventListener("click",E)}},[n,v.once]),L.useEffect(function(){return function(){y&&(v.pickRadius?x(l,y):k(l,y),m(!1))}}),L.useEffect(function(){return window.addEventListener("keydown",w),function(){document.addEventListener("keydown",w)}},[w]);function g(){var e=v.onPickStart;v.once,i(!0),e&&e(),document.body.style.cursor=h,o(!0)}var w=L.useCallback(function(e){27===e.keyCode&&(o(!1),i(!1),document.body.style.cursor=b)},[]),E=function(t){W(document.body).then(function(e){m(t),d(e)}),!0!==v.once&&void 0!==v.once||(o(!1),i(!1),document.body.style.cursor=b)},k=function(e,t){var r=t.pageX,n=t.pageY,o=M(e,r,n);C(o)},x=function(e,t){var r,n,o=t.pageX,a=t.pageY,c=v.pickRadius,u=c.unit,i=c.amount;if("radius"===u)n=-(r=i)-1;else{if("pixel"!==u)throw new Error("[EyeDrop] Please define a proper unit type.");if(i%2==0)throw new Error("[EyeDrop] The unit 'pixel' may only have an odd amount.");r=(i-1)/2,n=-(i-1)/2-1}for(var s,f,l=[],d=r;d!==n;d--)for(var p=r;p!==n;p--)f=a-p,(s=o-d)<0||f<0||l.push(M(e,s,f));P(l)},P=function(e){var a=0,c=0,u=0;e.map(function(e,t){var r=e.r,n=e.g,o=e.b;a+=r*r,c+=n*n,u+=o*o,0!==t&&(a=Math.sqrt(a/2),c=Math.sqrt(c/2),u=Math.sqrt(u/2))});var t=parseInt(a),r=parseInt(c),n=parseInt(u);C({r:t,g:r,b:n})},C=function(e){var t=e.r,r=e.g,n=e.b,o=v.onPickEnd,a="rgb(".concat(t,", ").concat(r,", ").concat(n,")"),c=function(e,t,r){var n=N(e),o=N(t),a=N(r);return"#".concat(n).concat(o).concat(a)}(t,r,n);u({rgb:a,hex:c}),v.onChange({rgb:a,hex:c,customProps:R}),o&&o()},S=v.wrapperClasses,I=v.buttonClasses,q=v.customComponent,O=v.colorsPassThrough,A=v.children,R=v.customProps,j=O?function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},O,t):{};return T.createElement("div",{style:X.eyedropperWrapper,className:S},q?T.createElement(q,B({onClick:g},j,{customProps:R,disabled:c})):T.createElement("button",{style:X.eyedropperWrapperButton,className:I,onClick:g,disabled:c},A||""))}});
