!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("html2canvas"),require("get-canvas-pixel-color")):"function"==typeof define&&define.amd?define(["react","html2canvas","get-canvas-pixel-color"],t):e["react-eyedrop"]=t(e.React,e.html2canvas,e.getCanvasPixelColor)}("undefined"!=typeof self?self:this,function(c,a,f){"use strict";function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}c=c&&c.hasOwnProperty("default")?c.default:c,a=a&&a.hasOwnProperty("default")?a.default:a,f=f&&f.hasOwnProperty("default")?f.default:f;var b=function(e){var t=e.toString(16);return t.length<2&&(t="0".concat(t)),t},v={eyedropperWrapper:{position:"relative"},eyedropperWrapperButton:{backgroundColor:"#000000",color:"#ffffff",border:"none",borderRadius:"20%",padding:"10px 25px"}};return function(e){function o(e){var h,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=this,r=p(o).call(this,e),i(y(y(h=!r||"object"!=typeof r&&"function"!=typeof r?y(t):r)),"pickColor",function(){var e=h.props.onPickStart,t=y(y(h)),r=t.once,o=t.cursorActive;e&&e(),document.body.style.cursor=o,document.addEventListener("click",h.targetToCanvas,{once:r})}),i(y(y(h)),"targetToCanvas",function(t){var e=t.target,r=h.props.pickRadius;a(e,{logging:!1}).then(function(e){r?h.extractColors(e,t):h.extractColor(e,t)})}),i(y(y(h)),"extractColor",function(e,t){var r=t.offsetX,o=t.offsetY,n=f(e,r,o);h.setColors(n)}),i(y(y(h)),"extractColors",function(e,t){for(var r,o,n=t.offsetX,a=t.offsetY,c=h.props.pickRadius,s=c%2==0?c/2:(c-1)/2,i=c%2==0?-c/2:-(c-1)/2-1,u=[],p=s;p!==i;p--)for(var l=s;l!==i;l--)o=a-l,(r=n-p)<0||o<0||u.push(f(e,r,o));h.calcAverageColor(u)}),i(y(y(h)),"calcAverageColor",function(e){var a=0,c=0,s=0;e.map(function(e,t){var r=e.r,o=e.g,n=e.b;a+=r*r,c+=o*o,s+=n*n,0!==t&&(a=Math.sqrt(a/2),c=Math.sqrt(c/2),s=Math.sqrt(s/2))});var t=parseInt(a),r=parseInt(c),o=parseInt(s);h.setColors({r:t,g:r,b:o})}),i(y(y(h)),"setColors",function(e){var t,r,o,n,a,c=e.r,s=e.g,i=e.b,u=y(y(h)).cursorInactive,p=h.props,l=p.onPickEnd,f=p.passThrough,v="rgb(".concat(c,", ").concat(i,", ").concat(s,")"),d=(t=i,r=s,o=b(c),n=b(t),a=b(r),"#".concat(o).concat(n).concat(a));document.body.style.cursor=u,f&&h.setState({colors:{rgb:v,hex:d}}),h.props.onChange({rgb:v,hex:d}),l&&l()}),h.state={colors:{rgb:"",hex:""}},h.once=void 0===e.once||e.once,h.cursorActive=e.cursorActive?e.cursorActive:"copy",h.cursorInactive=e.cursorInactive?e.cursorInactive:"auto",h}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,c.Component),t=o,(r=[{key:"componentDidMount",value:function(){var e=this.props.onInit;e&&e()}},{key:"render",value:function(){var e=this.props,t=e.wrapperClasses,r=e.buttonClasses,o=e.customComponent,n=e.passThrough,a=n?i({},n,this.state.colors):{};return c.createElement("div",{style:v.eyedropperWrapper,className:t},o?c.createElement(o,u({onClick:this.pickColor},a)):c.createElement("button",{style:v.eyedropperWrapperButton,className:r,onClick:this.pickColor},"Eye-Drop"))}}])&&s(t.prototype,r),n&&s(t,n),o}()});
